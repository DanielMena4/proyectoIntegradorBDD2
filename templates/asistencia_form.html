{% extends 'base.html' %}
{% block title %}
  {{ 'Editar Asistencia' if a else 'Nueva Asistencia' }}
{% endblock %}

{% block content %}
<div class="card shadow-sm">
  <div class="card-body">
    <h4 class="mb-3">
      {{ 'Editar Asistencia' if a else 'Nueva Asistencia' }}
    </h4>

    <form method="post">

      <div class="mb-3">
        <label class="form-label">ID Asistencia</label>
        <input
          type="number"
          name="asistenciaId"
          class="form-control"
          value="{{ a.asistenciaId if a }}"
          {% if a %}readonly{% endif %}
          required
        >
      </div>

      <div class="mb-3">
        <label class="form-label">Catequizando</label>
        <select name="catequizandoId" class="form-select" required>
          <option value="">Seleccione un catequizando</option>
          {% for c in catequizandos %}
            <option
              value="{{ c._id }}"
              {% if a and a.catequizandoId == c._id %}selected{% endif %}
            >
              {{ c.nombreCatequizando }} {{ c.apellidoCatequizando }}
            </option>
          {% endfor %}
        </select>
      </div>


      <div class="mb-3">
        <label class="form-label">Nivel</label>
        <select name="nivelId" class="form-select" required>
          <option value="">Seleccione un nivel</option>
          {% for n in niveles %}
            <option
              value="{{ n._id }}"
              {% if a and a.nivelId == n._id %}selected{% endif %}
            >
              {{ n.nombreNivel }}
            </option>
          {% endfor %}
        </select>
      </div>


      <div class="mb-3">
        <label class="form-label">Fecha</label>
        <input
          type="date"
          name="fecha"
          class="form-control"
          value="{{ a.fecha if a }}"
          required
        >
      </div>


      <div class="form-check mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          name="presente"
          id="presente"
          {% if a and a.presente %}checked{% endif %}
        >
        <label class="form-check-label" for="presente">
          Presente
        </label>
      </div>


      <div class="mb-3">
        <label class="form-label">Observaciones</label>
        <textarea
          name="observaciones"
          class="form-control"
          rows="3"
        >{{ a.observaciones if a }}</textarea>
      </div>

      <div class="d-flex justify-content-between">
        <a href="{{ url_for('lista_asistencias') }}" class="btn btn-outline-secondary">
          Cancelar
        </a>
        <button type="submit" class="btn btn-primary">
          {{ 'Actualizar' if a else 'Guardar' }}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
